<html>
<head>
    <title>D3 demo</title>
</head>
<body>
<h1>Data demo</h1>
<main id="d3Plot"></main>
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="bundle.browser.js"></script>
<script src="bundle.visualizer.d3.template.js"></script>
<script type="text/javascript">
    function fetchYaml(url) {
        return fetch(url)
            .then((response) => response.text())
    }

    Promise
        .all([
            fetchYaml('./asyncapifiles/application-consumer.yaml'),
            fetchYaml('./asyncapifiles/application-producer.yaml'),
        ])
        .then((yamlFiles) => {
            asyncApiPortal.process(yamlFiles).then((data) => {
                asyncApiPortal.d3Renderer(data.plugins.visualizer.d3.graph);
            });
        })
</script>
</body>
</html>